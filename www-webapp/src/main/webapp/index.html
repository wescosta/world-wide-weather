<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8">
        <meta name="google-site-verification" content="BDdlj9gQzJWKVwBvY8VZVXW7vjW7X-9h9ahh7kPVly4">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <link href='http://fonts.googleapis.com/css?family=Raleway:100,500' rel='stylesheet' type='text/css'>
		<link href="css/weather.css" rel="stylesheet">
        <title>WWW - World Wide Weather</title>
	</head>
	<body>
    	<figure class="entrada">
        	<img src="imagens/www.png" class="imagem-intro">
        </figure>
        <div class="arco-iris" id="elemento-menu">
        	<div class="vermelho esquerda"></div>
            <div class="laranja esquerda"></div>
            <div class="amarelo esquerda"></div>
            <div class="verde esquerda"></div>
            <div class="azul esquerda"></div>
            <div class="roxo esquerda"></div>
            <div class="lilas esquerda"></div>
        </div>
        <div class="arco-iris inverso" id="ativa-menu">
            <div class="lilas esquerda"></div>
            <div class="roxo esquerda"></div>
            <div class="azul esquerda"></div>
            <div class="verde esquerda"></div>
            <div class="amarelo esquerda"></div>
            <div class="laranja esquerda"></div>
            <div class="vermelho esquerda"></div>
        </div>
    	<main>
            <nav class="menu">
            	<ul>
                	<li class="borda-baixo borda-direita esquerda"><a id="celsius">C</a></li>
                    <li class="borda-baixo esquerda"><a id="fahrenheit">F</a></li>
                    <li class="borda-direita clear esquerda"><a>+</a></li>
                    <li class="esquerda"><a>-</a></li>
                </ul>
            </nav>
            <div id="map-canvas"></div>
        </main>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=weather"></script>
	<script src="js/weather.js"></script>
    <script src="js/jquery.transit.min.js"></script>
	<script type="text/javascript">
		var www = {
			vars : {
				menu : $('.menu'),
				arcoTraz : $('#elemento-menu'),
				arcoFrente : $('#ativa-menu')
			},
			entrada : function() {
				/*google.maps.event.addListenerOnce(map, 'idle', function(){*/
					$('.entrada').fadeOut('slow');
					www.bindElementos();
					window.clearInterval(intervalo);
				/*});*/
			},
			animacao : {
				aparece : function() {
					www.vars.menu.transition({ 
							marginTop: 10,
							top: 0
					}, 1000, 'ease');
					www.vars.arcoTraz.transition({
							top:-170,
							delay:500
					}, 1500, 'ease');
					www.vars.arcoFrente.transition({
							right:-400,
					}, 900, 'ease').transition({
							top:-10,
							right:-110,
							rotate: '49deg'
					}).transition({ top: -30, right:-130 }, 200);
				},
				esconde : function() {
					www.vars.menu.transition({ 
						marginTop: -240,
						top: 0
					}, 500, 'ease');
					www.vars.arcoTraz.transition({
							top:-360
					}, 400, 'ease');
					www.vars.arcoFrente.transition({
							top:-400,
							right:-400
					}, 900, 'ease').transition({
							top:-140,
							right:-140,
							rotate: '90deg',
							delay:300
					}).transition({ right:-160 }, 200);
				}
			},
			bindElementos : function() {
				www.vars.menu.on('click', '#celsius', function(){ $("#map-canvas").weather("celsius"); })
								  		   .on('click', '#fahrenheit', function(){ $("#map-canvas").weather("fahrenheit"); });
				
				www.vars.arcoFrente.toggle(function() { 
						www.animacao.aparece();
					},
					function() {
						www.animacao.esconde();
					}
				);
			}
		};
		//isto aqui acaba quando o loading passar a ser nativo:
		var intervalo = window.setInterval(www.entrada, 5000);
		
		$(function() {
			$("#map-canvas").weather();
			www.animacao.esconde();
		});
	</script>
        
	</body>
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-37069283-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</html>